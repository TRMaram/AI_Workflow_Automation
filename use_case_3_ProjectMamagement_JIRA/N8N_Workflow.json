{
  "name": "PMI",
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "simple": false,
        "filters": {
          "q": "has:attachment"
        },
        "options": {
          "downloadAttachments": true
        }
      },
      "type": "n8n-nodes-base.gmailTrigger",
      "typeVersion": 1.2,
      "position": [
        -360,
        860
      ],
      "id": "b1f4d68c-aad1-4fd5-ba3d-a86b8c2a9998",
      "name": "Gmail Trigger",
      "credentials": {
        "gmailOAuth2": {
          "id": "XHVTWlMqhoM5pQnc",
          "name": "Gmail account 6"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52a2f0d9-3137-4f6e-a2c1-8285694f6159",
              "name": "choices[0].message.content",
              "type": "string",
              "value": "=  {{ $json.text }}"
            }
          ]
        },
        "options": {}
      },
      "id": "a796fe48-a624-4cad-857b-189aa6cc1661",
      "name": "Get only the text",
      "type": "n8n-nodes-base.set",
      "position": [
        620,
        860
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "leftValue": "={{ $binary.attachment_0.mimeType }}",
                    "rightValue": "application/pdf",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "a26e1ff6-ac77-43e2-8cdf-34d1cd45b43a"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "b3d19f78-cc97-4287-9570-85430e65acf4",
                    "leftValue": "={{ $binary.attachment_0.mimeType }}",
                    "rightValue": "=image/",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "f88aa616-408c-4241-834d-a20015220abc",
                    "leftValue": "={{ $binary.attachment_0.mimeType }}",
                    "rightValue": "application/vnd.google-apps.document",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "291f2639-deb6-4ed6-aea0-09ab9e9c6cd6",
                    "leftValue": "={{ $binary.attachment_0.mimeType }}",
                    "rightValue": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {
          "allMatchingOutputs": true
        }
      },
      "id": "a258f6a9-e360-4c5e-96e2-f7046e2d40d2",
      "name": "Switch1",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3,
      "position": [
        -160,
        840
      ]
    },
    {
      "parameters": {
        "numberInputs": 4
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        880,
        860
      ],
      "id": "6fae8d2a-b2d3-4b76-b74f-9a2cb129c2cf",
      "name": "Merge"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52a2f0d9-3137-4f6e-a2c1-8285694f6159",
              "name": "choices[0].message.content",
              "type": "string",
              "value": "={{ $json.text ||$json.data }}  "
            }
          ]
        },
        "options": {}
      },
      "id": "222375fd-af5e-424e-956e-69f85dfe8c90",
      "name": "Get only the text1",
      "type": "n8n-nodes-base.set",
      "position": [
        600,
        1040
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52a2f0d9-3137-4f6e-a2c1-8285694f6159",
              "name": "choices[0].message.content",
              "type": "string",
              "value": "={{ $json.text }}"
            }
          ]
        },
        "options": {}
      },
      "id": "9dd966c1-c261-41c3-b576-ccb408d638fc",
      "name": "Get only the text2",
      "type": "n8n-nodes-base.set",
      "position": [
        620,
        500
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "operation": "text",
        "binaryPropertyName": "attachment_0",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        260,
        1080
      ],
      "id": "2af3af97-8426-48c1-885c-ba7dba081d20",
      "name": "Extract from File1"
    },
    {
      "parameters": {
        "operation": "pdf",
        "binaryPropertyName": "attachment_0",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        280,
        500
      ],
      "id": "e0e39bdf-e4b8-4e3a-94c0-5358b39d3690",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "inputBinaryField": "attachment_0"
      },
      "type": "n8n-nodes-docx-converter.docxToText",
      "typeVersion": 1,
      "position": [
        260,
        1240
      ],
      "id": "48de920a-0cbd-41cb-a8ec-76aa1d6e0917",
      "name": "DOCX to Text"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "52a2f0d9-3137-4f6e-a2c1-8285694f6159",
              "name": "choices[0].message.content",
              "type": "string",
              "value": "={{ $json.text ||$json.data }}  "
            }
          ]
        },
        "options": {}
      },
      "id": "5c44e0ad-7626-472f-96c8-381655887843",
      "name": "Get only the text6",
      "type": "n8n-nodes-base.set",
      "position": [
        600,
        1240
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://192.168.1.24:5000/ocr/GOT",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "attachment_0",
              "inputDataFieldName": "attachment_0"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        280,
        840
      ],
      "id": "2e768101-6c36-4bbe-91fd-686e2b795b7f",
      "name": "GOT_OCR"
    },
    {
      "parameters": {
        "operation": "sendAndWait",
        "sendTo": "maramtrabelsi1212@gmail.com",
        "subject": "Approval Required",
        "message": "={{ $json.output }}",
        "responseType": "customForm",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Report Confirmed ?",
              "fieldType": "textarea",
              "placeholder": "Confirmed",
              "requiredField": true
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        1560,
        700
      ],
      "id": "bfa398e8-01b5-4e6e-acc8-cf52a887156f",
      "name": "Gmail",
      "webhookId": "837ab721-bb3a-4fa5-923f-eb4483e7f854",
      "credentials": {
        "gmailOAuth2": {
          "id": "XHVTWlMqhoM5pQnc",
          "name": "Gmail account 6"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are ActionReview AI — a smart assistant specialized in reviewing and validating task items derived from project meeting minutes. Your role is to analyze the supervisor’s reply to a list of proposed action items, identify if any corrections are needed, and return the final validated action list — either as-is or with corrections applied.\n\n🔹 INPUTS\noriginal_actions: The list of action items extracted from the meeting. ({{ $('AI Agent2').item.json.output }})\n\nsupervisor_reply: The supervisor’s feedback. ({{ $json.data['Report Confirmed ?'] }})\n\n🔹 RULES\nAnalyze Supervisor Reply:\n\nIf the supervisor confirms the action list:\n\nReturn original_actions unchanged.\n\nIf the supervisor requests changes:\n\nExtract corrections in this format:\n\n[\n  {\n    \"field_to_correct\": \"description\" | \"assigned_to\" | \"due_date\" | \"notes\",\n    \"original_value\": \"string\",\n    \"suggested_change\": \"string\",\n    \"reason\": \"optional string\"\n  }\n]\nApply Corrections:\n\nUpdate original_actions with the corrections.\n\nReturn the modified updated_actions.\n\n🔹 OUTPUT FORMAT\nOnly return the final actions as a json.\n{\n  \"project_name\" : \"\",\n  \"Status\":\"\",\n  \"actions\": [\n    {\"assigned_to\" : \"\",\n      \"due_date\" : \"\", #change the date format to yyyy-MM-dd\n      \"description\" : \"description\" \"assigned_to\" \"due_date\",\n      \"summaries\":\"notes\",\n      \"status\":\"\"\n    }\n  ]\n\"Scheduled meeting\": [\n\"meeting_date\":\"\",\n\"meeting_time\":\"\",\n\"meeting_subject\":\"\"\n]\n}\nNo status object. No commentary. No extra text.\nJust the final validated actions — corrected if needed, unchanged if confirmed.\n\n",
        "hasOutputParser": true
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.6,
      "position": [
        1560,
        940
      ],
      "id": "30308057-6785-401e-969b-f5b46cb0139e",
      "name": "Basic LLM Chain"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1600,
        1140
      ],
      "id": "0d995a32-42b8-4a7e-a03a-b8aa53087f81",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "dYZWfaOXMEhGY7FU",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{  \"project_name\": \"AI Automation for Backlog Creation in Project Management\", \"status\" :\"initial meeting \",\"actions\": [    {     \"description\": \"Write meeting summaries with clear task assignments for each engineer\",      \"assigned_to\": \"Sonia\",      \"due_date\": \"25/05/2025\",      \"summaries\": \"Summaries should be detailed enough for AI processing; not overly technical\"   },  {      \"description\": \"Select OCR model for information extraction\", \"status\":\"TO DO\",     \"assigned_to\": \"Maram\",      \"due_date\": \"20/05/2025\",      \"summaries\": \"Applies to processing image-based summaries\"    }],\"Scheduled_meeting\": [\n{\"meeting_date\":\"\",\n\"meeting_time\":\"\",\n\"meeting_subject\":\"\"\n}]}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        1780,
        1140
      ],
      "id": "e19a5aa0-b1b0-4f67-809d-4172f2a81be4",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "\nlet originalList = $json.output.Scheduled_meeting ;\n\nreturn {originalList};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2360,
        1420
      ],
      "id": "6f675f85-0f1f-4a4f-bb88-ec4019afa2f2",
      "name": "Code1"
    },
    {
      "parameters": {
        "fieldToSplitOut": "originalList",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2580,
        1420
      ],
      "id": "18a722db-e170-4142-818a-377736387288",
      "name": "Split Out1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=you are a scheduler IA , i want you to help add this meeting to my calender and keep in my mind that the time now is {{ $now }} and the timeZone is Central European Standard Time (GMT+1):\nmeeting_details :\nmeeting_date : {{ $json.originalList[0].meeting_date }}\nmeeting_time :  {{ $json.originalList[0].meeting_time }}\nmeeting_subject :{{ $json.originalList[0].meeting_subject }}\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        2800,
        1420
      ],
      "id": "9eb79625-1997-4ebe-a66e-d2dc06aaa03b",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2840,
        1640
      ],
      "id": "586a4c24-ad74-4769-ac51-684e6c97af47",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "dYZWfaOXMEhGY7FU",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "rosiemt29@gmail.com",
          "mode": "list",
          "cachedResultName": "rosiemt29@gmail.com"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', ``, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', ``, 'string') }}",
        "additionalFields": {
          "description": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Description', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        3160,
        1640
      ],
      "id": "7899a628-7c3d-4ab8-a245-115d38037dab",
      "name": "Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "DwXml0uWIwNkJPW8",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2600,
        1160
      ],
      "id": "573fa69a-3006-498c-b249-f8acbac8791f",
      "name": "OpenAI Chat Model3",
      "credentials": {
        "openAiApi": {
          "id": "dYZWfaOXMEhGY7FU",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        3260,
        720
      ],
      "id": "d94a647f-148a-481d-a645-60f100abcb3f",
      "name": "OpenAI Chat Model4",
      "credentials": {
        "openAiApi": {
          "id": "dYZWfaOXMEhGY7FU",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "options": {
          "jql": "=project={{ $('Code2').item.json.transformedList[0].project_id }}"
        }
      },
      "type": "n8n-nodes-base.jiraTool",
      "typeVersion": 1,
      "position": [
        3700,
        560
      ],
      "id": "9a8479d7-f607-4509-9c26-3ba4139521b8",
      "name": "get_all_issues_id",
      "credentials": {
        "jiraSoftwareCloudApi": {
          "id": "YdvFt7v4vz7qIXDq",
          "name": "Jira SW Cloud account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "issueKey": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Issue_Key', ``, 'string') }}",
        "updateFields": {
          "statusId": {
            "__rl": true,
            "mode": "id",
            "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Status', ``, 'string') }}",
            "__regex": "^([0-9]{1,})"
          }
        }
      },
      "type": "n8n-nodes-base.jiraTool",
      "typeVersion": 1,
      "position": [
        3620,
        740
      ],
      "id": "694a7cd1-f3f2-4ae7-be21-db459b4309d1",
      "name": "update_issues",
      "credentials": {
        "jiraSoftwareCloudApi": {
          "id": "YdvFt7v4vz7qIXDq",
          "name": "Jira SW Cloud account"
        }
      }
    },
    {
      "parameters": {
        "project": {
          "__rl": true,
          "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Project', ``, 'string') }}",
          "mode": "id",
          "__regex": "^([0-9]{2,})"
        },
        "issueType": {
          "__rl": true,
          "mode": "id",
          "value": "10108",
          "__regex": "^([0-9]{1,})"
        },
        "summary": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Summary', ``, 'string') }}",
        "additionalFields": {
          "description": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Description', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.jiraTool",
      "typeVersion": 1,
      "position": [
        3420,
        740
      ],
      "id": "a5888c66-622d-47a5-bc8a-cd53fd089cff",
      "name": "create_issue",
      "credentials": {
        "jiraSoftwareCloudApi": {
          "id": "YdvFt7v4vz7qIXDq",
          "name": "Jira SW Cloud account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are an AI assistant responsible for updating Jira task status.\nInput : \n\"project_id\":{{ $json.transformedList[0].project_id }}\nThe user will input a new tasks descriptions\n\"new_tasks\":{{ $json.transformedList.toJsonString() }}\nYou have access to:\n\nget_all_issues_id(project_id) → retrieves a list of issues from project(project_id), each with:\n  * id: the issue identifier (e.g., JIRA-123)\n  * actions: the current task description\n  * status: the current status of the task (e.g done, to do, in progress)\n\n  update_issues(status_id, id) → updates  the task with the given status_id.\n\ncreate_issue(actions,project_id) → creates a new Jira task with the given description.\n\n.\n\n\nYour responsibilities:\n- Retrieve the current list of issues using get_all_issues_id(project_id).\n\n- convert the user-provided textual status to its numeric ID:\n\n\"done\" → 31\n\n\"in progress\" → 21\n\n\"to do\" → 11\n\n- For each new task description provided by the user:\n\nSearch for a matching or related task in the existing list.\n\nApply the following logic:\n\n✅ If a related task is found:\n\n- If the status of the existing task is done or  In Progress \n\nCall update_issues(status_id, id) — update the task status based on status_id.\n\nInform the user: \"✅ Task id updated (status: done).\"\n\n\n\n\nIf the status is to do:\n\nInform the user: \"ℹ️ Task id not updated (status not done).\"\n\n➕ If no related task is found and the new status is to do:\nCall create_issue(new_action,project_id)\n\nInform the user: \"🆕 New task created with description: new_action.\"\n\nIf the new action is identical or very similar to the existing one:\n\nSkip the update and notify: \"⏭️ No changes made to task id – content is similar.\"\n\n🧠 Final goal:\nAvoid redundant updates, only modify completed tasks or in progress tasks. Keep the Jira board accurate, clean, and up-to-date with minimal duplication.\n\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        3320,
        500
      ],
      "id": "0a8315c2-3894-4720-9847-cad57a3aff60",
      "name": "follow_up_report",
      "executeOnce": false
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are JiraSync AI — an intelligent agent responsible for creating projects and creating and syncing task items into Jira.\n\nACTION:\nUse only the following tools:\n* create_project(project_name:string) // Creates a new Jira project\n\nCall it using:\n\n{\n  \"prject_name\":{{ $json.output.project_name }}\n  \"actions\":{{ $json.output.actions.toJsonString() }} ,\n}\nReturn only a clean JSON output confirming success or failure.\n\n🧠 AI Agent Logic: Project and Jira Issue Creation\n1- Create the Project\n\n   - Call: create_project(project_name)\n\n    - Capture the returned project id from the output of the create_project jira node .\n\n    - Ensure id is valid before proceeding.\n\n2- make sur the output is in plain json",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        2640,
        960
      ],
      "id": "6a7eaff4-e683-471d-b0e3-693025de17ef",
      "name": "initial_report"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "202ad09e-3571-48a9-a272-3a8d6f1f30fd",
              "leftValue": "={{ $json.output.status.toLowerCase() }}",
              "rightValue": "intermediary",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2020,
        760
      ],
      "id": "e046efe3-96b8-4488-9a1c-e7a8e8159c00",
      "name": "If"
    },
    {
      "parameters": {
        "content": "",
        "height": 560,
        "width": 1540
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2260,
        360
      ],
      "typeVersion": 1,
      "id": "e1f20518-0f6a-40c8-a74e-4277dca0b861",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "",
        "height": 420,
        "width": 1540,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2260,
        940
      ],
      "typeVersion": 1,
      "id": "c7f9d990-ff68-4b4f-a052-ffcc7d0f5f9b",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "",
        "height": 420,
        "width": 1040,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2260,
        1380
      ],
      "typeVersion": 1,
      "id": "e1f44054-08a3-40f5-9f33-b9f132e6d318",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "",
        "height": 1080,
        "width": 1620,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -420,
        360
      ],
      "typeVersion": 1,
      "id": "832e892d-fe03-4870-b88f-56867a1cfb5b",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "",
        "height": 1080,
        "width": 980,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1240,
        360
      ],
      "typeVersion": 1,
      "id": "5e944096-f0f3-4342-91bc-6b1e838210e9",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Read the following contract text: {{$json.choices[0].message.content}}\n\nYour tasks are:\n\n1- Identify and extract the following fields from the meeting content:\n{\n  \"project_name\": \"\",          // The name of the project discussed\n\"status\":\"\" // whether this is an initial meeting report or an intermediary meeting report where taks need to be updated\n  \"start_date\":\"\", // the date of the report\n  \"actions\": [                 // List of concrete actions or tasks discussed\n    {\n      \"description\": \"\",       // Brief description of the task\n      \"status\":\"\",  // TO DO or IN PROGRESS or DONE\n      \"assigned_to\": \"\",       // Person responsible for the task\n      \"due_date\": \"\",          // Deadline or due date\n      \"notes\": \"\"              // Any additional information related to the task\n    }\n  ],\n  \"meeting_date\": \"\",          // The date when the meeting took place\n  \"general_notes\": \"\"          // Any general notes not linked to specific actions\n}\n2- Ensure that the output contains the json above only.\n\n3- If a meeting is scheduled (look for explicit time/date mention or title keywords like “next meeting”), note this separately so it can be synced to Teams or Calendar.\n\n4- Keep the formatting consistent for direct Jira and Teams integration.\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        1560,
        420
      ],
      "id": "59efa7e4-11f2-45d8-bb2e-732ba0a529e2",
      "name": "AI Agent2"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1900,
        480
      ],
      "id": "43ddcd83-6261-4814-b40a-f8922608acb5",
      "name": "OpenAI Chat Model5",
      "credentials": {
        "openAiApi": {
          "id": "dYZWfaOXMEhGY7FU",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://rosiemt29.atlassian.net/rest/api/3/project",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "authorization",
              "value": "Basic cm9zaWVtdDI5QGdtYWlsLmNvbTpBVEFUVDN4RmZHRjBnRDVnbUo5MDIwZWN4emRtZ19ycEozZmxLV3F6ZVBITXVaejB0YWZUdUhKVk1oaS1zT2xTT2tWTUN4d3VvbTM1bi1Ja2lJa182S0YyQWN2dENhSm52dWJLdWVpMHBUeGt6Y2drMXF0OENWUUQ4T0RwZzhMcmhQMnVGWVcxT214UndxYVF4eU8xRFF1c0xhaXVCeE1oSzhxWm5PQXpFZkVBeUVjTlJoTFRkVWs9RUI3MTUzNkI="
            },
            {
              "name": "Accept",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "assigneeType",
              "value": "PROJECT_LEAD"
            },
            {
              "name": "leadAccountId",
              "value": "712020:5c0f38f5-a7d2-444d-ba9f-b8c9bcbfc4c1"
            },
            {
              "name": "projectTemplateKey",
              "value": "com.pyxis.greenhopper.jira:gh-simplified-agility-scrum"
            },
            {
              "name": "url",
              "value": "http://atlassian.com"
            },
            {
              "name": "projectTypeKey",
              "value": "software"
            },
            {
              "name": "name",
              "value": "={{ $json.output.project_name }}"
            },
            {
              "name": "key",
              "value": "={{ $json.output.project_name.toUpperCase().match(/\\b[A-Z]/g).join('').substring(0, 5)}}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        2800,
        1160
      ],
      "id": "d4b49ec9-714c-46cc-933a-21adb677f192",
      "name": "create_project"
    },
    {
      "parameters": {
        "jsCode": "\nfunction normalizeAssignee(inputName) {\n  const name = inputName.toLowerCase();\n\n  const teamMap = [\n    {\n      aliases: [\"maram\", \"mara\", \"manom\", \"trabelsi\"],\n      jiraId: \"712020:2252e3e41471-49e6-8bd2-00914e2036eb\"\n    },\n    {\n      aliases: [\"iheb\", \"ihebih99\"],\n      jiraId: \"712020:90c222f1-6437-463b-ae70-9f3fc75d6cb6\"\n    },\n    {\n      aliases: [\"sonia\", \"gharsalli\"],\n      jiraId: \"615717bc9cdb9300724883d3\"\n    },\n    {\n      aliases: [\"engineering team\", \"iheb and manom\", \"iheb and maramm\"],\n      jiraIds: [\n        \"712020:90c222f1-6437-463b-ae70-9f3fc75d6cb6\",  // Iheb\n        \"712020:2252e3e41471-49e6-8bd2-00914e2036eb\"    // Maram\n      ]}\n  ];\n\n  for (const entry of teamMap) {\n    if (entry.aliases.some(alias => name.includes(alias))) {\n      return entry.jiraId || entry.jiraIds;\n    }\n  }\n\n  return inputName; // Return as-is if no match found\n}\n\n\nconst cleaned = $input.first().json.output.replace(/```json\\n?/, '').replace(/\\n```/, '').trim();\n\n\n  let project_id = JSON.parse(cleaned).project_id || JSON.parse(cleaned).projectID|| JSON.parse(cleaned).projectId;\n\n\nlet originalList = $input.last().json.output.actions;\n\nlet transformedList = originalList.map(item => ({\n  project_id: project_id,\n  description: `${item.due_date} - ${item.description} `,\n  summaries: item.summaries,\n  status:item.status,\n  due_date:item.due_date,\n  assigned_to : normalizeAssignee(item.assigned_to)\n}));\nreturn {transformedList};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3460,
        960
      ],
      "id": "515c7717-b2b5-4598-825e-00bf918393a8",
      "name": "Code"
    },
    {
      "parameters": {
        "fieldToSplitOut": "transformedList",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        3640,
        960
      ],
      "id": "2057154a-2c05-46f6-9e00-2c118b17cfb2",
      "name": "Split Out"
    },
    {
      "parameters": {
        "batchSize": 5,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        3280,
        1160
      ],
      "id": "df05aa43-f8f0-4295-88f1-6b3148db5545",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "project": {
          "__rl": true,
          "value": "={{ $json.project_id.toString() }}",
          "mode": "id"
        },
        "issueType": {
          "__rl": true,
          "value": "10113",
          "mode": "list",
          "cachedResultName": "Task"
        },
        "summary": "={{ $json.summaries ? $json.summaries : $json.description }}\n",
        "additionalFields": {
          "description": "={{ $json.description }}\n"
        }
      },
      "type": "n8n-nodes-base.jira",
      "typeVersion": 1,
      "position": [
        3600,
        1180
      ],
      "id": "02520f8d-224c-4c33-90c5-0abadea6ed78",
      "name": "Jira Software1",
      "credentials": {
        "jiraSoftwareCloudApi": {
          "id": "YdvFt7v4vz7qIXDq",
          "name": "Jira SW Cloud account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        3100,
        980
      ],
      "id": "fc1ccbf2-0dc3-447c-a104-9528d94e1f4b",
      "name": "Merge1"
    },
    {
      "parameters": {
        "url": "https://rosiemt29.atlassian.net/rest/api/3/project/search",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "={{ $json.output.project_name }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Accept",
              "value": "application/json"
            },
            {
              "name": "authorization",
              "value": "Basic cm9zaWVtdDI5QGdtYWlsLmNvbTpBVEFUVDN4RmZHRjBnRDVnbUo5MDIwZWN4emRtZ19ycEozZmxLV3F6ZVBITXVaejB0YWZUdUhKVk1oaS1zT2xTT2tWTUN4d3VvbTM1bi1Ja2lJa182S0YyQWN2dENhSm52dWJLdWVpMHBUeGt6Y2drMXF0OENWUUQ4T0RwZzhMcmhQMnVGWVcxT214UndxYVF4eU8xRFF1c0xhaXVCeE1oSzhxWm5PQXpFZkVBeUVjTlJoTFRkVWs9RUI3MTUzNkI="
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2340,
        480
      ],
      "id": "5988c113-46c2-4265-8421-190c6eaed682",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "jsCode": "let id = $input.first().json.values[0].id;\nlet actions = $input.last().json.output.actions;\nlet transformedList = actions.map(item => ({\n  project_id: id,\n  description: `${item.due_date} - ${item.description} `,\n  summaries: item.summaries,\n  status:item.status,\n  due_date:item.due_date,\n  assigned_to : item.assigned_to\n}));\nreturn {transformedList};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2980,
        480
      ],
      "id": "28416c70-2156-413a-9a1d-a4bbcfb753a0",
      "name": "Code2"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        2660,
        480
      ],
      "id": "1d996f0c-d8d0-49d2-9f0c-4681eb9df1df",
      "name": "Merge2"
    },
    {
      "parameters": {
        "operation": "get",
        "issueKey": "DMCPL-3",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.jira",
      "typeVersion": 1,
      "position": [
        3000,
        740
      ],
      "id": "b5c97b1d-f193-42c6-861b-b7f27e3a6ccb",
      "name": "Jira Software",
      "credentials": {
        "jiraSoftwareCloudApi": {
          "id": "YdvFt7v4vz7qIXDq",
          "name": "Jira SW Cloud account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Gmail Trigger": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get only the text": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "GOT_OCR",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Extract from File1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "DOCX to Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get only the text1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Get only the text2": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File1": {
      "main": [
        [
          {
            "node": "Get only the text1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Get only the text2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DOCX to Text": {
      "main": [
        [
          {
            "node": "Get only the text6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get only the text6": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "GOT_OCR": {
      "main": [
        [
          {
            "node": "Get only the text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          },
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "Split Out1",
            "type": "main",
            "index": 0
          },
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out1": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar": {
      "ai_tool": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "initial_report",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "follow_up_report",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "get_all_issues_id": {
      "ai_tool": [
        [
          {
            "node": "follow_up_report",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "update_issues": {
      "ai_tool": [
        [
          {
            "node": "follow_up_report",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "create_issue": {
      "ai_tool": [
        [
          {
            "node": "follow_up_report",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "initial_report",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "AI Agent2": {
      "main": [
        [
          {
            "node": "Gmail",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model5": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "create_project": {
      "ai_tool": [
        [
          {
            "node": "initial_report",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "initial_report": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Jira Software1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Jira Software1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code2": {
      "main": [
        [
          {
            "node": "follow_up_report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "Code2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "d06d625e-367d-43e7-8c5a-42c5dc35f809",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "eda11f78dc41be1aa2e6362cde9ae6dd4b7bbe5c2c22874197c6fa1fa408e45b"
  },
  "id": "qPhcpEWLrTJrmWBT",
  "tags": []
}
